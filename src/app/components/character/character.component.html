<div class="relative h-screen overflow-hidden bg-custom-bg text-custom-text">

    @if (characterService.loading()) {
    <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div role="status">
            <img src="assets/icons/loading-spinner.svg" alt="Loading..." class="w-16 h-16">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    } @else if (characterService.error()) {
    <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div class="bg-red-500 text-white p-4 rounded-lg">
            {{ characterService.error() }}
        </div>
    </div>
    } @else if (characterService.isDataAvailable()) {
    <div class="relative h-[calc(100vh-64px)] overflow-hidden">
        @if (getMainRawImage()) {
        <div class="absolute inset-0 overflow-hidden">
            <img [src]="getMainRawImage()" alt="Character Image"
                class="w-full h-full object-cover opacity-70 animate-fade-in-1">
        </div>
        }

        <div class="relative h-full overflow-y-auto">
            @if (characterProfile) {
            <div class="mb-4 bg-custom-bg bg-opacity-80 p-4 rounded-lg">
                <div class="flex flex-wrap items-center justify-between">
                    <h2 class="text-3xl font-bold mb-2 md:mb-0 w-full md:w-auto animate-fade-in-1"
                        [style.color]="getClassColor(characterProfile.character_class.name)">
                        {{ characterProfile.name }}
                    </h2>
                    <p class="text-lg mb-2 md:mb-0 w-full md:w-auto animate-fade-in-2"
                        [style.color]="getClassColor(characterProfile.character_class.name)">
                        Level {{ characterProfile.level }} {{ characterProfile.active_spec.name }} {{ characterProfile.character_class.name }}
                    </p>
                    @if (characterProfile.guild) {
                    <p class="text-lg mb-2 md:mb-0 w-full md:w-auto animate-fade-in-3"
                        [style.color]="getFactionColor(characterProfile.faction)">
                        {{ characterProfile.guild.name }} - {{ characterProfile.realm.name }}
                    </p>
                    }
                    <p class="text-lg text-custom-text w-full md:w-auto animate-fade-in-4">
                        Item Level: {{ characterProfile.average_item_level }} ({{ characterProfile.equipped_item_level }} equipped)
                    </p>
                </div>
            </div>
            }
            @if (hasEquippedItems) {
            <div class="flex flex-wrap justify-between p-4">
                <div class="w-full md:w-5/12 space-y-4">
                    @for (item of getLeftColumnItems(); track $index) {
                    <div class="animate-fade-in-right animate-delay-{{ $index * 100 }}">
                        <app-equipment-card [item]="item" [isRightColumn]="false"></app-equipment-card>
                    </div>
                    }
                </div>
                <div class="w-full md:w-5/12 space-y-4">
                    @for (item of getRightColumnItems(); track $index) {
                    <div class="animate-fade-in-left animate-delay-{{ ($index + 8) * 100 }}">
                        <app-equipment-card [item]="item" [isRightColumn]="true"></app-equipment-card>
                    </div>
                    }
                </div>
            </div>
            } @else {
            <p class="text-custom-text p-4">No equipment data available.</p>
            }
        </div>
    </div>
    } @else {
    <p class="text-custom-text p-4">No character data available. Please fetch a character.</p>
    }
</div>
